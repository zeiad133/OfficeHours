<!DOCTYPE html>
<html>
  <title>Messages</title>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1">
  <link rel="stylesheet"
    type="text/css"
    href="assets/style.css">

  <style>
html,
body,
h1,
h2,
h3,
h4,
h5 {
  font-family: "Open Sans", sans-serif
}
  </style>

  <body class="w3-theme-l5">
    <!-- Page Container -->
    <div class="w3-container scrollbar w3-content"
      style="max-width:1400px;margin-top:80px">
      <!-- The Grid -->
      <div class="w3-row">
        <!-- Left Column -->
        <div class="w3-col m3 ">
          <!-- Profile -->

          <ng-container *ngIf="type === 'user'">

            <div>

              <div class="w3-card w3-round "
                style="background-color:#FCE200">
                <div class="w3-container">
                  <br>
                  <p (click)="viewProfile(question.expert)" style="cursor: pointer;" class="w3-center"><img src="{{question.expert?question.expert.profilePic: null}}"
                      class="w3-circle"
                      style="height:225px;width:225px"
                      alt="Avatar"></p>
                      <a style="cursor: pointer;"><h2 (click)="viewProfile(question.expert)" style="text-align:center">{{question.expert?question.expert.firstName:null}} {{question.expert?question.expert.lastName:null}}</h2></a>
                  <h3 style="text-align:center">{{question.expert.username}} </h3>
                  <h4 style="text-align:center">{{question.expert?question.expert.job:null}}</h4>

                  <hr style=" height:2px;border:none;background-color:black;color:black;font: bold">
                  <h3 style="text-align:center">About</h3>

                  <p style="text-align:center">{{question.expert?question.expert.about:null}}</p>

                </div>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="type === 'expert'">

            <div id="myRequest2"
              style="display: none">

              <div class="w3-card w3-round "
                style="background-color:#FCE200">
                <div class="w3-container">
                  <br>
                  <p (click)="viewProfile(question.expert)" style="cursor: pointer;" class="w3-center"><img src="{{question.expert?question.expert.profilePic:null}}"
                      class="w3-circle"
                      style="height:225px;width:225px"
                      alt="Avatar"></p>
                  <a style="cursor: pointer;"><h2 (click)="viewProfile(question.expert)" style="text-align:center">{{question.expert?question.expert.firstName:null}} {{question.expert?question.expert.lastName:null}}</h2></a>
                  <h3   style="text-align:center">{{question.expert.username}} </h3>
                  <h4 style="text-align:center">{{question.expert?question.expert.job:null}}</h4>

                  <hr style=" height:2px;border:none;background-color:black;color:black;font: bold">
                  <h3 style="text-align:center">About</h3>

                  <p style="text-align:center">{{question.expert?question.expert.about:null}}</p>

                </div>
              </div>
            </div>

            <div id="usersRequest2"
              style="display: none">

              <div class="w3-card w3-round "
                style="background-color:#FCE200">
                <div class="w3-container">
                  <br>
                  <p (click)="viewProfile(question.user)" style="cursor: pointer;" class="w3-center"><img src="{{question.expert?question.user?question.user.profilePic:null:null}}"
                      class="w3-circle"
                      style="height:225px;width:225px"
                      alt="Avatar"></p>
                      <a style="cursor: pointer;"><h2 (click)="viewProfile(question.user)" style="text-align:center">{{question.user?question.user.firstName:null}} {{question.user?question.user.lastName:null}}</h2></a>
                  <h3  style="text-align:center">{{question.user.username}} </h3>
                  <h4 style="text-align:center">{{question.user?question.user.job:null}}</h4>

                  <hr style=" height:2px;border:none;background-color:black;color:black;font: bold">
                  <h3 style="text-align:center">About</h3>

                  <p style="text-align:center">{{question.user?question.user.about:null}}</p>

                </div>
              </div>
            </div>
            <br>
          </ng-container>
          <!-- Accordion -->


          <!-- End Left Column -->
        </div>


        <!-- Middle Column -->
        <div class="w3-col m7">
          <div class="w3-row-padding">
            <div class="w3-col m12">
              <div class="w3-card w3-round w3-white">
                <div class="w3-container w3-padding">

                  <ng-container *ngIf="type === 'user'">

                    <div class="chat">
                      <ul>


                        <li class="you">
                          <a class="user"
                            href="#"><img alt="" src="{{profilePic}}" /></a>

                          <div class="message">
                            <p style="text-align: center;font: bold;font-size: 22px">
                              {{question.questionSubject}}
                            </p>
                            <p>
                              {{question.questionContent}}
                            </p>
                          </div>
                        </li>
                        <li class="other">
                          <a class="user"
                            href="#"><img alt="" src="{{question.expert?question.expert.profilePic:null}}" /></a>

                          <div class="message">
                            <ng-container *ngIf="question.status === 'accepted'">

                              <div id="acceptdiv"
                                style="float:right;margin-right:40%">
                                <button class="button button-accept"
                                  id="accept">
                            <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                              <path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path>
                            </svg>
                            </button>
                                <span style="margin-left:0"
                                  class="status">Request is Accepted</span>
                              </div>
                              <div *ngIf="selectedslot1">
                                  <br>
                                  <br>

                                  <div class="message">
                                   <p style="text-align: left">{{question.message}}</p>
                                    </div>
                                  <br>
                                  
                                      <h2>Slots:</h2>
                                      <label id="slott1" class="control control--radio">{{question.slots[0]}}
                                        <input id="slot1" type="radio" name="radio" />
                                        <div class="control__indicator"></div>
                                      </label>
                                      <label id="slott2" class="control control--radio">{{question.slots[1]}}
                                        <input id="slot2" type="radio" name="radio"/>
                                        <div class="control__indicator"></div>
                                      </label>
                                      <label id="slott3" class="control control--radio">{{question.slots[2]}}
                                        <input id="slot3" type="radio" name="radio" />
                                        <div class="control__indicator"></div>
                                      </label>
                                      
                                
                                  <br>

                                  <button class="w3-button " style="background-color:#fce200;float: right;;" type="submit" (click)="selectSlot()">
                                      <i class="fa fa-paper-plane"></i> Send
                                    </button>
                                    <p>.</p>
                                    <p>.</p>
                                   
                                </div>
                                <div *ngIf="selectedslot2">

                                <br>
                                <br>
                                <div class="message">
                                  <p style="text-align: left">{{question.message}}</p>
                                  </div>
                                <br>
                                <h5 style="text-align: center">{{question.slots[0]}}</h5>
                                <h5 style="text-align: center">{{question.slots[1]}}</h5>
                                <h5 style="text-align: center">{{question.slots[2]}}</h5>
                               
                                  </div>
                            </ng-container>
                            <ng-container *ngIf="question.status === 'pending'">

                              <div id="pendingdiv +"
                                style="float:right;margin-right:40%">
                                <button class="button button-pending"
                                  (click)="print()"
                                  id="pending">
                              <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                              </svg>
                              </button>
                                <span style="margin-left:0"
                                  class="status">Request is pending</span>
                              </div>
                            </ng-container>
                            <ng-container *ngIf="question.status === 'rejected'">

                              <div id="rejectdiv +"
                                style="float:right;margin-right:40%">
                                <button class="button button-reject"
                                  id="reject">
                              <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                              </svg>
                              </button>
                                <span style="margin-left:0"
                                  class="status">Request is Rejected</span>
                              </div>
                            </ng-container>
                           
                          </div>
                        </li>
                        <div *ngIf="selectedslot2">

                        <li class="you">
                          <a class="user"
                            href="#/profile"><img alt="" src="{{profilePic}}" /></a>

                          <div class="message">

                                    <h4 style="text-align: center">The selected slot is </h4>
                                    <h5>
                                      {{question.selectedSlot}}
        
                                    </h5>
                          </div>
                        </li>
                      </div>
                      <div *ngIf="selectedslot3">
                          <li class="other">
                          <a class="user"
                            href="#"><img alt="" src="{{question.expert.profilePic}}" /></a>
                          <div class="message">
                            
                              <h3 style="font: bold">Please Enter the Room Name(Number) </h3>
                              <h4>-Wait for {{question.expert.username}} response-</h4>  
                            <h3  style="font: bold"> Type of session</h3>
                              <h4>-Wait for {{question.expert.username}} response-</h4>  

                          </div>
                        </li>
              
                      </div>
                      <div *ngIf="sessionDetails">
                          <li class="other">
                          <a class="user"
                            href="#"><img alt="" src="{{question.expert.profilePic}}" /></a>
                          <div class="message">
                            
                              <h3 style="font: bold">Please Enter the Room Name(Number) </h3>
                              <h4>{{question.sessionRoom}}</h4>  
                            <h3  style="font: bold"> Type of session</h3>
                              <h4>{{question.typeOfSession}}</h4>  

                          </div>
                        </li>
              
                      </div>

                      </ul>
                    </div>
                  </ng-container>


                  <ng-container *ngIf="type === 'expert'">
                    <h1 id="button"
                      style="text-align: center;cursor:pointer;"
                      (click)="show()">To Show Messages Press Here</h1>

                    <div id="myRequest"
                      class="chat"
                      style="display: none">
                      <div class="chat">
                          <ul>
    
    
                            <li class="you">
                              <a class="user"
                                href="#"><img alt="" src="{{profilePic}}" /></a>
    
                              <div class="message">
                                <p style="text-align: center;font: bold;font-size: 22px">
                                  {{question.questionSubject}}
                                </p>
                                <p>
                                  {{question.questionContent}}
                                </p>
                              </div>
                            </li>
                            <li class="other">
                              <a class="user"
                                href="#"><img alt="" src="{{question.expert?question.expert.profilePic:null}}" /></a>
    
                              <div class="message">
                                <ng-container *ngIf="question.status === 'accepted'">
    
                                  <div id="acceptdiv"
                                    style="float:right;margin-right:40%">
                                    <button class="button button-accept"
                                      id="accept">
                                <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                  <path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path>
                                </svg>
                                </button>
                                    <span style="margin-left:0"
                                      class="status">Request is Accepted</span>
                                  </div>
                                  <div *ngIf="selectedslot1">
                                      <br>
                                      <br>
    
                                      <div class="message">
                                       <p style="text-align: left">{{question.message}}</p>
                                        </div>
                                      <br>
                                      
                                          <h2>Slots:</h2>
                                          <label id="slott1" class="control control--radio">{{question.slots[0]}}
                                            <input id="slot1" type="radio" name="radio" />
                                            <div class="control__indicator"></div>
                                          </label>
                                          <label id="slott2" class="control control--radio">{{question.slots[1]}}
                                            <input id="slot2" type="radio" name="radio"/>
                                            <div class="control__indicator"></div>
                                          </label>
                                          <label id="slott3" class="control control--radio">{{question.slots[2]}}
                                            <input id="slot3" type="radio" name="radio" />
                                            <div class="control__indicator"></div>
                                          </label>
                                          
                                    
                                      <br>
    
                                      <button class="w3-button " style="background-color:#fce200;float: right;;" type="submit" (click)="selectSlot()">
                                          <i class="fa fa-paper-plane"></i> Send
                                        </button>
                                        <p>.</p>
                                        <p>.</p>
                                       
                                    </div>
                                    <div *ngIf="selectedslot2">
    
                                    <br>
                                    <br>
                                    <div class="message">
                                      <p style="text-align: left">{{question.message}}</p>
                                      </div>
                                    <br>
                                    <h5 style="text-align: center">{{question.slots[0]}}</h5>
                                    <h5 style="text-align: center">{{question.slots[1]}}</h5>
                                    <h5 style="text-align: center">{{question.slots[2]}}</h5>
                                   
                                      </div>
                                </ng-container>
                                <ng-container *ngIf="question.status === 'pending'">
    
                                  <div id="pendingdiv +"
                                    style="float:right;margin-right:40%">
                                    <button class="button button-pending"
                                      (click)="print()"
                                      id="pending">
                                  <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                                  </svg>
                                  </button>
                                    <span style="margin-left:0"
                                      class="status">Request is pending</span>
                                  </div>
                                </ng-container>
                                <ng-container *ngIf="question.status === 'rejected'">
    
                                  <div id="rejectdiv +"
                                    style="float:right;margin-right:40%">
                                    <button class="button button-reject"
                                      id="reject">
                                  <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                                  </svg>
                                  </button>
                                    <span style="margin-left:0"
                                      class="status">Request is Rejected</span>
                                  </div>
                                </ng-container>
                               
                              </div>
                            </li>
                            <div *ngIf="selectedslot2">
    
                            <li class="you">
                              <a class="user"
                                href="#/profile"><img alt="" src="{{profilePic}}" /></a>
    
                              <div class="message">
    
                                        <h4 style="text-align: center">The selected slot is </h4>
                                        <h5>
                                          {{question.selectedSlot}}
            
                                        </h5>
                              </div>
                            </li>
                          </div>
                          <div *ngIf="selectedslot3">
                              <li class="other">
                              <a class="user"
                                href="#"><img alt="" src="{{question.expert.profilePic}}" /></a>
                              <div class="message">
                                
                                  <h3 style="font: bold">Please Enter the Room Name(Number) </h3>
                                  <h4>-Wait for {{question.expert.username}} response-</h4>  
                                <h3  style="font: bold"> Type of session</h3>
                                  <h4>-Wait for {{question.expert.username}} response-</h4>  
    
                              </div>
                            </li>
                  
                          </div>
                          <div *ngIf="sessionDetails">
                              <li class="other">
                              <a class="user"
                                href="#"><img alt="" src="{{question.expert.profilePic}}" /></a>
                              <div class="message">
                                
                                  <h3 style="font: bold">Please Enter the Room Name(Number) </h3>
                                  <h4>{{question.sessionRoom}}</h4>  
                                <h3  style="font: bold"> Type of session</h3>
                                  <h4>{{question.typeOfSession}}</h4>  
    
                              </div>
                            </li>
                  
                          </div>
    
                          </ul>
                        </div>
                    </div>





                    <div class="chat" id="usersRequest" style="display: none">
                        <ul>
      
                          
                          <li class="other">
                            <a class="user" href="#"><img alt="" src="{{question.user.profilePic}}" /></a>
                            
                            <div class="message">
                              <p style="text-align: center;font: bold;font-size: 22px">
                                {{question.questionSubject}}              
                              </p>
                              <p>
                                {{question.questionContent}}              
                              </p>
                            </div>
                          </li>
                          <li class="you">
                            <a class="user" href="#"><img alt="" src="{{profilePic}}" /></a>
                         
                            <div class="message" >
                              <ng-container *ngIf="question.status === 'accepted'">
      
                                <div id="acceptdiv" style="float:right;margin-right:40%">
                                <button class="button button-accept" id="accept" >
                                  <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path>
                                  </svg>
                                  </button>  
                                  <span style="margin-left:0" class="status">Request is Accepted</span>
                                </div>
                                <div  *ngIf="vis1">
                                <angular2-date-picker   [(ngModel)]="date1" [settings]="settings"></angular2-date-picker>
                                <angular2-date-picker   [(ngModel)]="date2" [settings]="settings"></angular2-date-picker>
                                <angular2-date-picker   [(ngModel)]="date3" [settings]="settings"></angular2-date-picker>
                                <br><br>
                                <div >
                                  <br>
                                  <br>

                                    <input class="form-control" style="height:50px;" required type="text" [(ngModel)]="message" id="message" placeholder="Write Message" />
                                  </div>
                                <br>
                                <div>
                                  <button class="w3-button " style="background-color:#fce200;float: right;;" type="submit" (click)="sendSlots()">
                                      <i class="fa fa-paper-plane"></i> Send
                                    </button>
                                    <p>.</p>
                                    <p>.</p>
                                  </div>
                                  </div>
                                  <div *ngIf="vis2">
                                    <br>
                                    <br>
                                    <div class="message">
                                        <p style="text-align: left">{{question.message}}</p>
                                        </div>
                                        <br>
                                    <h5 style="text-align: center">{{question.slots[0]}}</h5>
                                    <h5 style="text-align: center">{{question.slots[1]}}</h5>
                                    <h5 style="text-align: center">{{question.slots[2]}}</h5>
                                    
                                   
                                  </div>
                              </ng-container>
                              <ng-container *ngIf="question.status === 'pending'">
              
                                <div id="pendingdiv +" style="float:right;margin-right:40%">
                                  <button class="button button-pending" (click)="print()" id="pending">
                                    <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                      <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                                    </svg>
                                    </button>  
                                    <span style="margin-left:0" class="status">Request is pending</span>
                                  </div><br>
                                  <br>
                                  <h3 style="font: bold"> Please, Accept or reject the request :D </h3>

                                  <div class='buttons'>
                                      <div class='col'>
                                        <a class='button -decline js-decline'  style="height: 50px;cursor: pointer;" (click)="rejectRequest()">
                                          Reject
                                        </a>
                                      </div>
                                      <div class='col'>
                                        <a class='button -accept js-accept' style="height: 50px;cursor: pointer;" (click)="acceptRequest()">
                                          Accept
                                        </a>
                                </div>
                              </div>

                         
                               
                                </ng-container>
                              <ng-container *ngIf="question.status === 'rejected'">
              
                                <div id="rejectdiv +" style="float:right;margin-right:40%">
                                  <button class="button button-reject" id="reject">
                                    <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24">
                                      <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                                    </svg>
                                    </button>  
                                    <span style="margin-left:0" class="status">Request is Rejected</span>
                                  </div>  
                                  <div *ngIf="vis3" >
                                  
                                  <div  >
                                      <br>
                                      <br>
    
                                        <input class="form-control" style="height:50px;" required type="text" [(ngModel)]="message" id="message" placeholder="Write Message" />
                                      </div>
                                    <br>
                                      <button class="w3-button " style="background-color:#fce200;float: right;;" type="submit" (click)="sendMessage()">
                                          <i class="fa fa-paper-plane"></i> Send
                                        </button>
                                        <p>.</p>
                                        <p>.</p>
                                        


                                        </div>
                                  <div *ngIf="vis4" >
                                    <br>
                                    <br>
                                      <p style="text-align: left">{{question.message}}</p>

                                    </div>
                                        
                                </ng-container>
                              
                            </div>
                          </li >
                          <ng-container *ngIf="question.status === 'accepted'">

                          <div *ngIf="vis5">
                          <li class="other">
                            
                            <a class="user" href="#/profile"><img alt="" src="{{question.user.profilePic}}" /></a>
                            
                            <div class="message">
                                <h4 style="text-align: center">The selected slot is </h4>
                            <h5>
                              {{question.selectedSlot}}

                            </h5>

                                <div class='buttons' *ngIf="con">
                                     
                                      <div class='col'>
                                        <a class='button -accept js-accept' style="height: 50px;cursor: pointer;" (click)="confirm()">
                                          Continue
                                        </a>
                                </div>
                              </div>
                           
                          </div>
                        </li>
                      </div>

                      <div *ngIf="vis6">
                        <li class="you">
                          <a class="user"
                            href="#/profile"><img alt="" src="{{profilePic}}" /></a>

                          <div class="message">
                            <h4>Please Enter the Room Name(Number) </h4>
                            <input class="form-control" style="height:50px;" type="text" [(ngModel)]="sessionRoom" id="sessionRoom" placeholder="Session Name(Number)" />
                            <h4>Type of session</h4>
                            <div  class="dropdown dropdown-dark">
                                <select id="sessionType" name="two" required class="dropdown-select">
                                  <option value="">Type of Session</option>
                                  <option value="Chat">Chat Only</option>
                                  <option value="Video">Chat and Video</option>
                                </select>
                              </div>
                              <br>
                              <button class="w3-button " style="background-color:#fce200;float: right;;" type="submit" (click)="finish()">
                                  <i class="fa fa-check"></i> Done
                                </button>
                                <p>.</p>
                                <p>.</p>
                          
                          </div>
                        </li>
                        </div>

                        <div *ngIf="done">
                            <li class="you">
                              <a class="user"
                                href="#/profile"><img alt="" src="{{profilePic}}" /></a>
    
                              <div class="message">
                                  <h3 style="font: bold">Please Enter the Room Name(Number) </h3>
                                  <h4>{{question.sessionRoom}}</h4>  
                                <h3  style="font: bold"> Type of session</h3>
                                  <h4>{{question.typeOfSession}}</h4> 
                              
                              </div>
                            </li>
                            </div>
                        </ng-container>
                      </ul>
                    </div>





                  </ng-container>




                </div>
              </div>
            </div>
          </div>
          <!-- End Middle Column -->
        </div>

        <!-- Right Column -->


        <!-- End Right Column -->

        <!-- End Grid -->
      </div>

      <!-- End Page Container -->
    </div>
    <br>










  </body>

</html>